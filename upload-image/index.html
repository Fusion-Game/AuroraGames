<!DOCTYPE html>
<html>
<head>
  <title>Upload Image to GitHub</title>
</head>
<body>
  <form>
    <input type="file" id="image-file" />
    <button type="submit" id="upload-button">Upload Image</button>
  </form>

  <script>
    var axios = require('axios');
    var fs = require('fs');

    let token = "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"

    const imageFile = document.querySelector('#image-file');
    imageFile.addEventListener('change', function() {
      const file = this.files[0];
      const fileName = file.name;
      uploadFileApi(token, file, fileName);
    });

    function uploadFileApi(token, file, fileName) {

      var data = JSON.stringify({
        "message": "image file",
        "content": file,
        "branch": "main",
        "path": `upload-image/${fileName}`
      });

      var config = {
        method: 'put',
        url: `https://api.github.com/repos/Proton6255/AuroraGames/contents/upload-image/${fileName}`,
        headers: {
          'Authorization': `Bearer ${token}`,
          'Content-Type': 'application/json'
        },
        data: data
      };

      axios(config)
        .then(function (response) {
          console.log(JSON.stringify(response.data));
        })
        .catch(function (error) {
          console.log(error);
        });
    }
  </script>
</body>
</html>
