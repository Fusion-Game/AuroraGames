<!DOCTYPE html>
<html>
<head>
  <title>Upload File to GitHub</title>
</head>
<body>
  <form>
    <input type="file" id="file" />
    <button type="submit" id="upload-button">Upload File</button>
  </form>

  <div id="error-message"></div>
  <div id="success-message"></div>

  <script>
    var axios = require('axios');

    const token = "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";

    const fileInput = document.querySelector('#file');
    const uploadButton = document.querySelector('#upload-button');
    const errorMessage = document.querySelector('#error-message');
    const successMessage = document.querySelector('#success-message');

    uploadButton.addEventListener('click', function(event) {
      event.preventDefault();

      const file = fileInput.files[0];
      const fileName = file.name;
      const contentType = file.type;

      uploadFileApi(token, file, fileName, contentType)
        .then(() => {
          successMessage.textContent = 'Successfully uploaded file!';
        })
        .catch((error) => {
          errorMessage.textContent = 'Error uploading file: ' + error.message;
        });
    });

    async function uploadFileApi(token, file, fileName, contentType) {

      const url = `https://api.github.com/repos/gshaffer312/AuroraGames/contents/upload-file/${fileName}`;

      var data = JSON.stringify({
        "message": "img upload",
        "content": file,
        "branch": "main"
      });

      var config = {
        method: 'put',
        url: url,
        headers: {
          'Authorization': `Bearer ${token}`,
          'Content-Type': contentType
        },
        data: data
      };

      try {
        await axios(config);
      } catch (error) {
        throw error;
      }
    }
  </script>
</body>
</html>
